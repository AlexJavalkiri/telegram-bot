from telegram.ext import Application, CommandHandler, MessageHandler, ChatMemberHandler, filters
import random, os

TOKEN = os.getenv("8445348429:AAFRx8nu-1JEM_SA3IKF32C3_e6QeaGKJ2Y")
ROASTS = ["–ü–∏–∑–¥–µ—Ü, —Ç—ã —á—ë, –∏–∑ –º–æ—Ä–≥–∞ —Å–±–µ–∂–∞–ª?", "–ë–ª—è—Ç—å, —ç—Ç–æ –∫–∞–∫ —Ç–∞–∫ –∂–∏—Ç—å —É–º—É–¥—Ä–∏–ª—Å—è?", "–°—É–∫–∏–Ω —Å—ã–Ω, —Ç–≤–æ–π —Ç–µ–∫—Å—Ç –º—ë—Ä—Ç–≤, –∫–∞–∫ –º–æ–π –∫–æ—Ç!", "–ù–∞—Ö—É–π, –∏–¥–∏ –≤ –≥—Ä–æ–±–∏–∫–µ –ø–æ–ª–µ–∂–∏!", "–Å–ø—Ç, —á—Ç–æ –∑–∞ —Ö—É–π–Ω—è –≤–º–µ—Å—Ç–æ –º–æ–∑–≥–æ–≤?", "–ï–±–∞—Ç—å, —Ç—ã –≤ —É–¥–∞—Ä–µ, –∫–∞–∫ –∫–∞—Ç–∞—Ñ–∞–ª–∫!", "–•—É–π–Ω—è –ø–æ–ª–Ω–∞—è, –±—É–¥—Ç–æ –Ω–µ–∫—Ä–æ–ª–æ–≥ –ø–∏—Å–∞–ª!", "–ü–æ—Ö–µ—Ä, –Ω–æ —ç—Ç–æ –ø–∏–∑–¥–µ—Ü!", "–ß—ë –∑–∞ —Ö—É–π–Ω—è, —Ç—ã –∑–æ–º–±–∏?", "–ë–ª—è—Ö–∞, —ç—Ç–æ —Ç–≤–æ–π –º–∞–∫—Å–∏–º—É–º –∏–ª–∏ –¥–æ—Ö–ª—ã–π?", "–ó–∞–µ–±–∏—Å—å, –Ω–æ –≤ –≥—Ä–æ–±—É –ª—É—á—à–µ –≤—ã–≥–ª—è–¥–∏—à—å!", "–ü–æ—Ö—É–π, —Ç–≤–æ–π —Ç–µ–∫—Å—Ç ‚Äî –ø–∏–∑–¥–µ—Ü!", "–ï–±–∞—Ç—å, —ç—Ç–æ —á—Ç–æ –∑–∞ —Ö—É–π?", "–ü–∏–∑–¥–µ—Ü, —Ç—ã –∫–∞–∫ –º–æ–≥–∏–ª—å–Ω—ã–π –∫–∞–º–µ–Ω—å!", "–•—É—ë–≤–æ –¥–µ–ª–æ, —Å –∫–ª–∞–¥–±–∏—â–∞ –ø–∏—à–µ—à—å?", "–ë–ª—è—Ç—å, —ç—Ç–æ –ø—Ä–∏–∑—Ä–∞–∫ –Ω–∞–ø–∏—Å–∞–ª?", "–ù–∞—Ö–µ—Ä, —Ç–≤–æ–π —Ç–µ–∫—Å—Ç ‚Äî –∫–∞–∫ –≤–µ–Ω–æ–∫!", "–Å–± —Ç–≤–æ—é –º–∞—Ç—å, —Ç—ã –∂–∏–≤–æ–π?", "–ü–æ—Ö—É–π, —ç—Ç–æ —Ö—É–π–Ω—è —É—Ä–æ–≤–Ω—è –∫—Ä–µ–º–∞—Ç–æ—Ä–∏—è!", "–ó–∞–µ–±–∞–ª, –ø–∏—à–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∏–ª–∏ –≤ —è—â–∏–∫!", "–•—É–π–ª–æ, —Ç–≤–æ–π —Ç–µ–∫—Å—Ç ‚Äî –º–æ–≥–∏–ª–∞ –±–µ–∑ –∫—Ä–µ—Å—Ç–∞!", "–ï–±–∞—Ç—å, —Ç—ã –∏–∑ –∞–¥–∞?"]
TRIGGER_WORDS = ["–ø—Ä–∏–≤–µ—Ç", "–∫–∞–∫ –¥–µ–ª–∞", "–±–æ—Ç", "–±–µ—Ä–∏", "–¥–∞–≤–∞–π", "–ø–æ—Ö–µ—Ä", "–Ω–æ—Ä–º", "–≥–æ", "–∑–¥–∞—Ä–æ–≤", "–ø–æ—Ö", "–ø–æ—Ö—É–π", "—á—ë", "–Ω—É", "—Ö—É–π", "–∑–∞–µ–±–∏—Å—å", "–ø–∏–∑–¥–µ—Ü", "–µ–±–∞—Ç—å", "—Ö—É–µ—Ç–∞", "–±–ª—è", "–Ω–∞—Ö", "–ø–æ—Ö–µ—Ä—é", "–µ–±–∞–Ω—ã–π", "—Ö—É–π–ª–æ", "–ø–æ—Ö—Ä–µ–Ω", "—ë–±–∞"]

async def start(update, context):
   await update.message.reply_text(f"–ü—Ä–∏–≤–µ—Ç –ø–µ–¥—Ä–∏–ª–æüóø –î–æ–±–∞–≤—å –º–µ–Ω—è –≤ –≥—Ä—É–ø–ø—É,–±—É–¥–µ—Ç –≤–µ—Å–µ–ª–æ) ({', '.join) –∏ —É–ø–æ–º—è–Ω–∏ @{context.bot.username}")

async def roast(update, context):
   if update.message.chat.type in ["group", "supergroup"] and (any(word in update.message.text.lower() for word in TRIGGER_WORDS) or f"@{context.bot.username}".lower() in update.message.text.lower()):
      await update.message.reply_text(random.choice(ROASTS))

async def welcome(update, context):
   for member in update.chat_member.new_chat_members:
      await update.message.reply_text(f"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {member.first_name}! –ü–æ—Ö–µ—Ä, —Å –∫–ª–∞–¥–±–∏—â–∞ —Å–±–µ–∂–∞–ª?")

app = Application.builder().token(TOKEN).build()
app.add_handler(CommandHandler("start", start))
app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, roast))
app.add_handler(ChatMemberHandler(welcome, ChatMemberHandler.CHAT_MEMBER))
app.run_polling()
